<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hospital Appointment</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
      margin: 0;
      padding: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }
    h1 {
      color: #007bff;
      text-align: center;
      margin: 15px 0;
    }
    .form-container {
      flex: 1;
      width: 100%;
      max-width: 100%;
      background: #fff;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    /* Chatbot floating button */
    #chatbot-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      font-size: 26px;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }

    /* Chatbot window */
    #chatbot-window {
      position: fixed;
      bottom: 90px;
      right: 20px;
      width: 340px;
      height: 460px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
      display: none;
      flex-direction: column;
      overflow: hidden;
    }
    #chatbot-header {
      background: #007bff;
      color: white;
      padding: 10px;
      font-weight: bold;
      text-align: center;
    }
    #chatbot-messages {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
    }
    .message {
      margin: 8px 0;
      padding: 8px;
      border-radius: 8px;
    }
    .user { background: #e1f0ff; text-align: right; }
    .bot { background: #f1f1f1; text-align: left; }
    #chatbot-input {
      display: flex;
      flex-direction: column;
      border-top: 1px solid #ddd;
      padding: 5px;
    }
    #faq-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin-bottom: 5px;
    }
    .faq-btn {
      background: #e8f0fe;
      color: #007bff;
      border: none;
      border-radius: 5px;
      padding: 5px 10px;
      cursor: pointer;
      font-size: 13px;
    }
    .faq-btn:hover { background: #007bff; color: white; }
    #chatbot-input-box {
      display: flex;
    }
    #chatbot-input-box input {
      flex: 1;
      padding: 10px;
      border: none;
      outline: none;
    }
    #chatbot-input-box button {
      background: #007bff;
      color: white;
      border: none;
      padding: 10px 15px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h1>Book Your Appointment</h1>

  <!-- Google Form Embed -->
  <div class="form-container">
    <iframe 
      src="https://docs.google.com/forms/d/e/1FAIpQLSe9L85Emqe-BKh6sOWy5b5JOVR4_OxVnHSad_gUDF5letgTuQ/viewform?embedded=true"

      frameborder="0"
      marginheight="0"
      marginwidth="0">
      Loadingâ€¦
    </iframe>
  </div>

  <!-- Chatbot Button -->
  <button id="chatbot-btn">ðŸ’¬</button>

  <!-- Chatbot Window -->
  <div id="chatbot-window">
    <div id="chatbot-header">Hospital Assistant</div>
    <div id="chatbot-messages"></div>
    <div id="chatbot-input">
      <!-- FAQ Buttons -->
      <div id="faq-buttons">
        <button class="faq-btn">Hospital hours</button>
        <button class="faq-btn">Location</button>
        <button class="faq-btn">Book appointment</button>
        <button class="faq-btn">Emergency contact</button>
        <button class="faq-btn">Services offered</button>
      </div>
      <div id="chatbot-input-box">
        <input type="text" id="user-input" placeholder="Ask a question..." />
        <button id="send-btn">âž¤</button>
      </div>
    </div>
  </div>

  <script>
    // Toggle chatbot visibility
    const chatbotBtn = document.getElementById("chatbot-btn");
    const chatbotWindow = document.getElementById("chatbot-window");
    chatbotBtn.addEventListener("click", () => {
      chatbotWindow.style.display =
        chatbotWindow.style.display === "flex" ? "none" : "flex";
    });

    const sendBtn = document.getElementById("send-btn");
    const userInput = document.getElementById("user-input");
    const messages = document.getElementById("chatbot-messages");

    // Send message to API
    async function sendMessage(question) {
      if (!question) return;

      // Display user message
      const userMsg = document.createElement("div");
      userMsg.className = "message user";
      userMsg.textContent = question;
      messages.appendChild(userMsg);
      userInput.value = "";
      messages.scrollTop = messages.scrollHeight;

      // Bot placeholder
      const botMsg = document.createElement("div");
      botMsg.className = "message bot";
      botMsg.textContent = "Typing...";
      messages.appendChild(botMsg);
      messages.scrollTop = messages.scrollHeight;

      try {
        const response = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer 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" //ðŸ”¹ Replace with your key
          },
          body: JSON.stringify({
            model: "gpt-4o-mini",
            messages: [
              { 
                role: "system", 
                content: "You are a friendly hospital assistant for patients in Mauritius. Provide helpful, short answers about hospital location (e.g., Port Louis, Curepipe, Quatre Bornes), appointment booking, visiting hours, emergency numbers (like 114 for SAMU), and common medical services (e.g., general check-ups, pediatrics, dental care, vaccination)." 
              },
              { role: "user", content: question }
            ],
            max_tokens: 200
          })
        });

        const data = await response.json();
        botMsg.textContent = data.choices[0].message.content.trim();
      } catch (err) {
        botMsg.textContent = "Sorry, I couldn't reach the server. Please try again later.";
      }
      messages.scrollTop = messages.scrollHeight;
    }

    sendBtn.addEventListener("click", () => sendMessage(userInput.value.trim()));
    userInput.addEventListener("keypress", e => {
      if (e.key === "Enter") sendMessage(userInput.value.trim());
    });

    // FAQ buttons
    document.querySelectorAll(".faq-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        sendMessage(btn.textContent);
      });
    });
  </script>

</body>
</html>
















